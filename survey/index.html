/* ============================================================
   Automated Clarity™ — HVAC Opportunity Scan
   SURVEY PAGE ONLY • NO CLICK INTERCEPT • NO OVERLAY
   ============================================================ */

(function () {

  const questions = [
    {
      id: "lead-entry",
      title: "When a new lead comes in from your website or ads, what usually happens?",
      help: "Think forms, Google Ads, LSAs — not phone calls.",
      options: [
        "Someone reaches out almost immediately, every time.",
        "It depends on how busy the office is that day.",
        "Some leads get delayed or missed altogether."
      ]
    },
    {
      id: "quote-followup",
      title: "How are install or replacement quotes followed up after they’re sent?",
      help: "Focus on larger jobs — not quick service calls.",
      options: [
        "Every quote follows a defined follow-up process.",
        "Follow-up depends on staff remembering or having time.",
        "Once sent, most quotes aren’t actively followed up."
      ]
    },
    {
      id: "response-speed",
      title: "On busy days, how consistent is your response speed to new inquiries?",
      help: "When calls stack, jobs run long, or emergencies hit.",
      options: [
        "Response speed stays consistent no matter the day.",
        "Response time slips when things get hectic.",
        "There’s no real consistency once the day gets busy."
      ]
    },
    {
      id: "past-customers",
      title: "How do past customers get re-engaged for maintenance or repeat work?",
      help: "Tune-ups, reminders, seasonal outreach.",
      options: [
        "We have a regular, reliable outreach process.",
        "We reach out occasionally, but it’s not consistent.",
        "We mostly wait until customers contact us again."
      ]
    },
    {
      id: "reviews",
      title: "What happens after a successful job when it comes to reviews?",
      help: "Google reviews reflect what follow-up is doing behind the scenes.",
      options: [
        "Reviews are requested the same way every time.",
        "Reviews depend on someone remembering to ask.",
        "There’s no structured review process."
      ]
    },
    {
      id: "headspace",
      title: "Which of these feels closest to where you are right now?",
      help: "This won’t change your results — it just helps frame what you see next.",
      options: [
        "We’re busy — days are always full.",
        "I’m not sure where to start fixing things.",
        "We’ve tried systems before and they didn’t stick.",
        "The tech side feels overwhelming.",
        "I’ve been burned by marketers before."
      ]
    }
  ];

  let step = 0;
  const answers = {};

  const root = document.createElement("div");
  root.style.maxWidth = "760px";
  root.style.margin = "40px auto";
  root.style.padding = "26px";
  root.style.background = "#0b1220";
  root.style.borderRadius = "22px";
  root.style.boxShadow = "0 40px 120px rgba(0,0,0,.7)";
  root.style.color = "#e5e7eb";
  root.style.fontFamily = "Inter, -apple-system, BlinkMacSystemFont, sans-serif";

  document.body.style.background = "#030B1A";
  document.body.style.margin = "0";
  document.body.appendChild(root);

  function render() {
    const q = questions[step];

    root.innerHTML = `
      <div style="font-size:20px;font-weight:600;margin-bottom:8px;">
        ${q.title}
      </div>
      <div style="font-size:13px;color:#94a3b8;margin-bottom:18px;">
        ${q.help}
      </div>
      ${q.options.map((o, i) => `
        <div
          data-i="${i}"
          style="
            border:1px solid rgba(148,163,184,.25);
            border-radius:14px;
            padding:14px 16px;
            margin-bottom:12px;
            cursor:pointer;
            ${answers[q.id] === i ? "border-color:#6EC8D3;background:rgba(110,200,211,.08);" : ""}
          "
        >
          ${o}
        </div>
      `).join("")}
      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:24px;">
        <div style="font-size:13px;color:#94a3b8;">
          Step ${step + 1} of ${questions.length}
        </div>
        <button
          id="next"
          style="
            background:#6EC8D3;
            color:#020617;
            border:none;
            border-radius:999px;
            padding:10px 22px;
            font-weight:600;
            cursor:pointer;
          "
        >
          Next
        </button>
      </div>
    `;

    root.querySelectorAll("[data-i]").forEach(el => {
      el.onclick = () => {
        answers[q.id] = Number(el.dataset.i);
        render();
      };
    });

    document.getElementById("next").onclick = () => {
      if (answers[q.id] == null) return;
      step++;
      if (step >= questions.length) {
        window.location.href = "/reveal";
      } else {
        render();
      }
    };
  }

  render();

})();
